<html lang="cn">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <style>
	.main{
		width: 100%;
	}
	.pic-warp{
		padding: 0 28px 0 10px;
	}
	.pic-box{
		margin: 6px 2px 20px 2px;
		width: 100%;
		padding: 4px;
		box-shadow: inset 0 2px 8px rgba(0,0,0,.25), 0 2px 8px rgba(0,0,0,.12);
		background: #fff;
	}
	.pic{
		width: 100%;
		min-height: 150px;
		  background-repeat:no-repeat;
		  background-position:center;
		background-image: url(1.gif);
	}
	.footer{
		text-align: center;
		line-height: 2em;
		padding: 0 10px;
	}
	.full{
		position: fixed;
	    background-color: rgba(0, 0, 0, 0.68);
	    top: 0;
	    left: 0;
	    height: 100%;
	    width: 100%;
	}
	.full-sms{
		color: #fff;
		text-align: center;
		padding-top: 14em;
	}
	</style>

</head>
<body>
<div class="full" id="full"><div class="full-sms">获取高清图片中...</div></div>
<div class="pic-warp" id="pic-warp"></div>
<div class="footer" onclick="load(5)">加载更多</div>
<script>
		var xmlhttp,oneimgnum=4300;
		xmlhttp=new XMLHttpRequest();
		xmlhttp.onreadystatechange=function(){
			if (xmlhttp.readyState==4 && xmlhttp.status==200)
			{
				document.getElementById("full").style.display="none";
				oneimgnum=parseInt(xmlhttp.responseText);
				console.log(oneimgnum);
			}
		}
		xmlhttp.open("GET","https://oneimg.haotown.cn/data/",true);
		xmlhttp.send();
        function toastMessage(message) {
                window.control.toastMessage(message)
          }
         function geturl(url,id) {
                window.control.geturl(url,id)
          }
        function alertMessage(message) {
            alert(message)
         }
        function sumToJava(number1, number2){
             window.control.onSumResult(number1 + number2)
        }
		var scrollloading=true;
		var ele=document.getElementById("pic-warp");
		load(5);
		function load(num){
			for (var i = 0; i <num; i++) {
				var oneimgid=Math.round(Math.random() *oneimgnum);
				var picele='<img class="pic" src="http://t4.haotown.cn/img/bj@'+oneimgid+'.jpg?imageView2/2/w/480/h/270/interlace/1/q/100" alt=""><div>ID:<span class="id">'+oneimgid+'<span>';
				var warp= document.createElement('div');
				warp.className="pic-box";
				warp.innerHTML=picele;
				warp.oneimg=oneimgid;
				warp.onclick=function(){oneimg(this)};
				ele.appendChild(warp);
			}
		}
		function oneimg(e){
			var url="http://t4.haotown.cn/img/bj@"+ e.oneimg+".jpg";
			document.getElementById('full').style.display='block';
			setTimeout(function(){
				document.getElementById('full').style.display='none';
			},3000)
			geturl(url,e.oneimg);
		}
	</script>


</body>
</html>